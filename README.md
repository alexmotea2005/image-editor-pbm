# image-editor-pbm
This project implements a complete command-line image editor in the C programming language, designed to work with images in the NetPBM family, specifically the grayscale (PGM) and color (PPM) formats. Both ASCII (P2 for grayscale, P3 for color) and binary (P5 for grayscale, P6 for color) variants are supported. The program was developed as part of the “Programarea Calculatoarelor” course, and it strictly follows the requirements from the assignment specification: it processes images entirely in memory, accepts a fixed set of text-based commands, and prints precise messages as feedback for each operation.

The central idea of the editor is very simple: the user loads an image, selects a region of interest (or the whole image), and then issues transformations such as cropping, rotating, equalizing the histogram, or applying convolution filters. At any point, the image can be saved back to disk in either ASCII or binary form. The interaction happens entirely through standard input and output, with no graphical interface.

Internally, the program is structured around the IMG data structure. This structure stores the image’s dimensions (m = width, n = height), the maximum pixel value (valmax), the file type code (type = 2, 3, 5, or 6), the number of channels per pixel (pixeli = 1 for grayscale or 3 for RGB), and a dynamically allocated 3D array matrice of shape [n][m][pixeli] that holds the actual pixel values. The structure also contains four integers (x1, y1, x2, y2) that describe the current selection rectangle in the image. By default, after loading, the whole image is selected.

The program is divided into several source files, each handling a clear responsibility. The functii.c file implements the high-level commands. The load function opens a file, verifies its header, allocates memory, and reads pixel values, supporting both ASCII and binary encodings. The selectat function updates the current selection, with options to select a custom rectangle or the entire image. The crop function reduces the image to just the selected region by allocating a new smaller matrix, copying pixels, and freeing the old one. The save function writes the image back to a file, with an optional “ascii” flag to control whether the output should be text or binary. The aplicatie function forwards the user’s request to apply a filter (EDGE, SHARPEN, BLUR, or GAUSSIAN_BLUR) to the function that performs convolutions. The equalize function performs histogram equalization on grayscale images, spreading pixel values more evenly to enhance contrast. The histogram function prints a textual histogram, with a user-chosen number of bins and maximum stars. The rotate function rotates the image or the current selection by multiples of 90 degrees, with checks that ensure only square selections are rotated. Finally, fexit frees all allocated memory and ends the program.

The imagine.c file contains memory management and rotation helpers. The alocare function allocates the 3D matrix for a given image size and channel count, while freeimg recursively frees all allocated memory. The rotire90 function is responsible for rotating either the whole image or just the current square selection by 90 degrees, creating a new matrix and mapping pixels to their rotated positions.

The ascii_si_binar.c file implements the low-level input/output routines. citireascii and citirebinary read pixel values from ASCII or binary files, respectively, into the matrix. afis_ascii and afis_binary perform the inverse operation, printing or writing pixel values back to files. These functions ensure that images conform to the NetPBM specification.

The subfunctii.c file contains a small utility function cuvinte, which tokenizes command lines. It takes a string and a cursor position and extracts the next word, skipping spaces and newlines. This simple tokenizer is used throughout the program to parse commands like SELECT 0 0 10 10 or SAVE output.ppm ascii.

The design of the program emphasizes correctness and defensive programming. Each file operation is validated: if an image fails to load (because of a missing file, an invalid header, or invalid dimensions), the program prints Failed to load <filename> and resets its internal state. Memory allocations are always checked, and previously loaded images are freed before loading new ones to prevent leaks. Operations that are not valid for the current image type are rejected with clear messages, such as Black and white image needed for color-only operations or Easy, Charlie Chaplin when trying to apply a filter to a grayscale image. Commands that require a valid selection, like rotation, verify that the selection is square before proceeding.

Algorithmically, the program covers several important image processing techniques. Histogram equalization is implemented using a cumulative frequency array (CDF), mapping old pixel values to new ones with the formula
